# JSON

## Compatibility

This package tries to be fully compatible with `encoding/json` package in standard
library at both API and behavior level.
By default it alias the types and functions in the standard library.

To get better performance, you can build your application with tag `jsoniter`
to use [jsoniter], which announces itself 100% compatible drop-in replacement
of `encoding/json` and is tested by a lot of projects.

[jsoniter]: https://github.com/json-iterator/go

## High performance

For some frequently used types, hand-written code and unsafe features are used to
achieve super high performance and reduce memory allocation, see the following benchmark.

Optimized types are:

- slice of integers (eg. []int, []uint32, []int64 ...)
- slice of strings
- map with string keys and string values
- map with string keys and interface values

And choose `jsoniter` will always give you better performance than the standard library.

## Extension

`UnmarshalExt` and `ExtDecoder` extends the json syntax with following features:

1. trailing comma of Object and Array
1. traditional, end of line, or pragma comments
1. Python boolean constants
1. Python None as null
1. Python style single quote string
1. import other JSON files (with max depth limited)

It helps in many scenes, such as developing test data generated by python program,
configuration with comments, or managing many json files with duplicate contents.

## Benchmark

```text
goos: darwin
goarch: amd64
pkg: github.com/jxskiss/gopkg/json

BenchmarkMarshalStringMap-12                             2070658               548 ns/op             256 B/op          1 allocs/op
BenchmarkMarshalStringMap_JSONIter-12                     464418              2617 ns/op            1791 B/op         21 allocs/op
BenchmarkMarshalStringMap_Standard-12                     384398              3218 ns/op            1376 B/op         25 allocs/op

BenchmarkMarshalStringInterfaceMap-12                     249194              4241 ns/op            1223 B/op          6 allocs/op
BenchmarkMarshalStringInterfaceMap_JSONIter-12             87182             13939 ns/op            5427 B/op         73 allocs/op
BenchmarkMarshalStringInterfaceMap_Standard-12             73864             16422 ns/op            5474 B/op         97 allocs/op

BenchmarkUnmarshalStringMap-12                            581343              2108 ns/op            1201 B/op          7 allocs/op
BenchmarkUnmarshalStringMap_JSONIter-12                   460382              2644 ns/op            1505 B/op         46 allocs/op
BenchmarkUnmarshalStringMap_Standard-12                   191655              6259 ns/op            2057 B/op         55 allocs/op
```
