# json

## Compatibility

This package provides a drop-in replacement of `encoding/json`.
Any incompatible behavior with `encoding/json` is considered a bug.

To get better performance, you can build your application with tag `gojson`
to use [go-json], which is a fully compatible drop-in replacement
of `encoding/json` but with high performance.

[go-json]: https://github.com/goccy/go-json

## Performance

By default, this package uses `encoding/json` in the standard library.
It gives the best compatibility but poor performance.

You can build your application with tag `gojson` to switch the implementation to
`goccy/go-json`, which has much better performance than `encoding/json` and many other
third-party JSON libraries.

`goccy/go-json` is announced and tested as 100% drop-in replacement of `encoding/json`,
but if you encounter some incompatible behavior unfortunately, you may remove the `gojson`
build tag to quickly switch to `encoding/json`, and
[submit an issue](https://github.com/goccy/go-json/issues) to `goccy/go-json`.

For marshalling map data where key ordering does not matter, you may use the shortcut
function `MarshalMapUnordered`, which disables map key ordering to get better performance
(this is only available with `gojson` tag, not the standard library implementation).

## Extension

### Utilities

String operation avoiding unnecessary memory allocation:

1. `MarshalToString(v interface{}) (string, error)`
1. `UnmarshalFromString(str string, v interface{}) error`

Encoder and Decoder with method chaining capabilities:

1. `NewEncoder(w).SetEscapeHTML(false).SetIndent("", "  ").Encode(v)`
2. `NewDecoder(r).UseNumber().DisallowUnknownFields().Decode(v)`

Disable HTMLEscape to get output more friendly to read for human:

1. `MarshalNoHTMLEscape(v interface{}, indentPrefix, indent string) ([]byte, error)`

Handy shortcuts to load and dump JSON data from/to file:

1. `Load(path string, v interface{}) error`
1. `Dump(path string, v interface{}, indentPrefix, indent string) error`

### Extended syntax

`UnmarshalExt`, `LoadExt` extends the JSON syntax with following features:

1. trailing comma of Object and Array
1. traditional, end of line, or pragma comments
1. simple identifier as object key without quotes
1. Python boolean constants
1. Python None as null
1. Python style single quote string
1. import other JSON files (with max depth limited)

It helps in many scenes, such as:

1. working with data generated by python program
1. configuration with comments
1. managing many json files with duplicate contents
1. testing driven by JSON files

## Benchmark

See https://github.com/goccy/go-json#benchmarks.

## Other JSON libraries

1. https://github.com/tidwall/gjson <br>
   GJSON is a Go package that provides a fast and simple way to get values from a json document.
   It has features such as one line retrieval, dot notation paths, iteration, and parsing json lines.
